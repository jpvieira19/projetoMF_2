<div *ngIf="selectedProject" class="project-details mt-5">
  <h3>Project Details</h3>
  <p><strong>Name:</strong> {{ selectedProject.name }}</p>
  <p><strong>Start Date:</strong> {{ selectedProject.startDate | date: 'shortDate' }}</p>
  <p><strong>End Date:</strong> {{ selectedProject.endDate | date: 'shortDate' }}</p>

  <div class="d-flex justify-content-between align-items-center mb-3">
    <h4 class="mt-4">Colaborators Associated to {{ selectedProject.name }}</h4>
    <div class="d-flex">
      <select class="form-select me-3" [(ngModel)]="assocFilterOption" (change)="applyAssocFilterOption()">
        <option value="all">Colaboradores no Projeto em qualquer altura</option>
        <option value="current">Colaboradores Atualmente no Projeto</option>
        <option value="past">Colaboradores que j√° estiveram no Projeto</option>
        <option value="future">Colaboradores futuros no projeto</option>
      </select>
      <button class="btn btn-primary btn-lg" (click)="openAddAssociation()">Add Colaborator</button>
    </div>
  </div>
  <input type="text" class="form-control mb-3" placeholder="Filter Colaborators" (keyup)="applyAssocFilter($any($event.target).value)">
  <div class="table-responsive">
    <table class="table table-striped table-bordered table-hover">
      <thead class="table-light">
        <tr>
          <th (click)="sortAssocData('colaboratorId')" style="cursor: pointer">Colaborator ID</th>
          <th (click)="sortAssocData('startDate')" style="cursor: pointer">Data Inicio</th>
          <th (click)="sortAssocData('endDate')" style="cursor: pointer">Data Fim</th>
        </tr>
      </thead>
      <tbody>
        <tr *ngIf="filteredAssociations.length === 0">
          <td colspan="3">No colaborators found</td>
        </tr>
        <tr *ngFor="let association of paginatedAssocData(); let i = index">
          <td>{{ association.colaboratorId }}</td>
          <td>{{ association.startDate | date: 'shortDate' }}</td>
          <td>{{ association.endDate | date: 'shortDate' }}</td>
        </tr>
      </tbody>
    </table>
    <div class="d-flex justify-content-between align-items-center mt-3">
      <button class="btn btn-secondary" (click)="previousAssocPage()" [disabled]="currentAssocPage === 1">Previous</button>
      <span>Page {{ currentAssocPage }} of {{ totalAssocPages }}</span>
      <button class="btn btn-secondary" (click)="nextAssocPage()" [disabled]="currentAssocPage === totalAssocPages">Next</button>
    </div>
  </div>

  <div *ngIf="isAddingAssociation" class="modal">
    <div class="modal-content">
      <span class="close" (click)="closeAddAssociation()">&times;</span>
      <h2>Add Colaborator</h2>
      <form #addAssociationForm="ngForm" (ngSubmit)="addAssociationToProject()">
        <div class="mb-3">
          <label for="projectId" class="form-label">Project</label>
          <input type="text" class="form-control" id="projectId" name="projectId" [value]="selectedProject.name" disabled>
        </div>
        <div class="mb-3">
          <label for="colaboratorId" class="form-label">Colaborator</label>
          <select id="colaboratorId" name="colaboratorId" class="form-control" required [(ngModel)]="newAssociation.colaboratorId">
            <option *ngFor="let colaborator of colaboradoresAssocLista" [value]="colaborator.id">
              {{ colaborator.id }} - {{ colaborator.name }}
            </option>
          </select>
        </div>
        <div class="mb-3">
          <label for="DataInicio" class="form-label">Data Inicio</label>
          <input type="date" class="form-control" id="DataInicio" name="DataInicio" required [(ngModel)]="newAssociation.startDate">
        </div>
        <div class="mb-3">
          <label for="DataFim" class="form-label">Data Fim</label>
          <input type="date" class="form-control" id="DataFim" name="DataFim" required [(ngModel)]="newAssociation.endDate">
        </div>
        <button type="submit" class="btn btn-primary" [disabled]="addAssociationForm.invalid">Add</button>
      </form>
    </div>
  </div>
</div>
